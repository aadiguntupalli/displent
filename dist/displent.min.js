/*! 10/24/2014*/
window.Displent=Ember.Application.create(),Displent.Router.map(function(){this.resource("users",function(){this.resource("user",{path:"/:user_id"},function(){})}),this.resource("profile",{path:"/profiles/:profile_id"},function(){}),this.resource("photoThumbnails",function(){this.resource("photoThumbnail",{path:"/:photoThumbnail_id"},function(){})}),this.resource("photo",{path:"/photos/:photo_id"},function(){})}),Displent.ApplicationAdapter=DS.RESTAdapter.extend({host:"http://localhost:3223/api"}),Displent.Photo=DS.Model.extend({path:DS.attr("string"),title:DS.attr("string"),owner:DS.belongsTo(Displent.User,{embedded:"always"}),location:DS.attr("string"),dateTaken:DS.attr("date"),focalLength:DS.attr("number")}),DS.RESTAdapter.map("Displent.Photo",{owner:{embedded:"always"}}),Displent.PhotoSerializer=DS.RESTSerializer.extend(DS.EmbeddedRecordsMixin,{normalizePayload:function(a){console.log("photo serializer"),Ember.keys(a).forEach(function(b){console.log(b);var c=Ember.String.camelize(b);c!=b&&(a[c]=a[b],delete a[b])});var b={photo:a};return b}}),Displent.PhotoThumbnail=DS.Model.extend({path:DS.attr("string"),title:DS.attr("string"),owner:DS.belongsTo("user",{async:!0})}),Displent.PhotoThumbnailSerializer=DS.RESTSerializer.extend(DS.EmbeddedRecordsMixin,{normalizePayload:function(a){var b=a.map(function(a){return{id:a.id,path:a.path,title:a.title}}),c={photoThumbnail:b};return c}}),Displent.Profile=DS.Model.extend({firstName:DS.attr(),lastName:DS.attr(),profilePic:DS.attr(),membership:DS.attr(),memberSince:DS.attr(),themePic:DS.attr()}),Displent.ProfileSerializer=DS.RESTSerializer.extend({serialize:function(a,b){var c=this._super(a,b);return c.profile},normalizePayload:function(a){Ember.keys(a).forEach(function(b){console.log(b);var c=Ember.String.camelize(b);c!==b&&(a[c]=a[b],delete a[b])});var b={profile:a};return console.log(JSON.stringify(b)),b}}),Displent.User=DS.Model.extend({firstName:DS.attr(),lastName:DS.attr(),profilePic:DS.attr(),membership:DS.attr(),photoThumbnails:DS.hasMany("photoThumbnails")}),Displent.UserSerializer=DS.RESTSerializer.extend({normalizePayload:function(a){var b=a.map(function(a){return{id:a.id,firstName:a.first_name,lastName:a.last_name,profilePic:a.profile_pic,membership:a.membership}}),c={user:b};return c}}),Displent.PhotoRoute=Ember.Route.extend({model:function(a){return console.log("photo params:"),console.log(a),this.store.find("photo",a.photo_id)}}),Displent.PhotoThumbnailsRoute=Ember.Route.extend({model:function(){return this.store.find("photoThumbnail")}}),Displent.ProfileRoute=Ember.Route.extend({model:function(a){return console.log("params:"),console.log(a),this.store.find("profile",a.profile_id)}}),Displent.UserRoute=Ember.Route.extend({afterModel:function(a){this.transitionTo("profile",a.id)}}),Displent.UsersRoute=Ember.Route.extend({model:function(){return this.store.find("user")}}),Displent.UsersController=Ember.ArrayController.extend({actions:{addPitre:function(){var a=this.store.createRecord("profile",{firstName:"Pitre",lastName:"Goud",profilePic:"ppics/4",membership:"Silver",themePic:"tpics/4"});console.log(a),a.save(),console.log("adding Pitre")}}});